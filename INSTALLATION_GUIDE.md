# ุฏููู ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ ุงูููุตู ๐

ุฏููู ุดุงูู ูุชุซุจูุช ูุฅุนุฏุงุฏ ุจูุช ุชููุฌุฑุงู ูุฅุฏุงุฑุฉ ุงููููุฑูุชู.

## ๐ ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

### ูุชุทูุจุงุช ุงููุธุงู
- **ูุธุงู ุงูุชุดุบูู**: Linux (Ubuntu 18.04+), Windows 10+, macOS 10.14+
- **Python**: ุงูุฅุตุฏุงุฑ 3.8 ุฃู ุฃุญุฏุซ
- **ุงูุฐุงูุฑุฉ**: 512 MB RAM ูุญุฏ ุฃุฏูู
- **ุงูุชุฎุฒูู**: 100 MB ูุณุงุญุฉ ูุงุฑุบุฉ
- **ุงูุดุจูุฉ**: ุงุชุตุงู ุฅูุชุฑูุช ูุณุชูุฑ

### ูุชุทูุจุงุช ุงููููุฑูุชู
- **RouterOS**: ุงูุฅุตุฏุงุฑ 6.0 ุฃู ุฃุญุฏุซ
- **API**: ูุฌุจ ุชูุนูู ุฎุฏูุฉ API
- **ุงููุณุชุฎุฏู**: ุญุณุงุจ ูุณุชุฎุฏู ุจุตูุงุญูุงุช ูุงููุฉ ุฃู ูุญุฏุฏุฉ
- **ุงูุดุจูุฉ**: ุฅููุงููุฉ ุงููุตูู ููุฑุงูุชุฑ ุนุจุฑ ุงูุดุจูุฉ

## ๐ง ุงูุชุซุจูุช ุฎุทูุฉ ุจุฎุทูุฉ

### ุงูุฎุทูุฉ 1: ุชุญุถูุฑ ุงูุจูุฆุฉ

#### ุนูู Ubuntu/Debian
```bash
# ุชุญุฏูุซ ุงููุธุงู
sudo apt update && sudo apt upgrade -y

# ุชุซุจูุช Python ู pip
sudo apt install python3 python3-pip python3-venv -y

# ุชุซุจูุช ุฃุฏูุงุช ุฅุถุงููุฉ
sudo apt install git curl wget unzip -y
```

#### ุนูู CentOS/RHEL
```bash
# ุชุญุฏูุซ ุงููุธุงู
sudo yum update -y

# ุชุซุจูุช Python ู pip
sudo yum install python3 python3-pip -y

# ุชุซุจูุช ุฃุฏูุงุช ุฅุถุงููุฉ
sudo yum install git curl wget unzip -y
```

#### ุนูู Windows
1. ุญููู Python ูู [python.org](https://python.org)
2. ุชุฃูุฏ ูู ุชุญุฏูุฏ "Add Python to PATH" ุฃุซูุงุก ุงูุชุซุจูุช
3. ุงูุชุญ Command Prompt ููุดุฑู
4. ุชุญูู ูู ุงูุชุซุจูุช:
   ```cmd
   python --version
   pip --version
   ```

#### ุนูู macOS
```bash
# ุชุซุจูุช Homebrew (ุฅุฐุง ูู ููู ูุซุจุชุงู)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# ุชุซุจูุช Python
brew install python3

# ุชุญูู ูู ุงูุชุซุจูุช
python3 --version
pip3 --version
```

### ุงูุฎุทูุฉ 2: ุชุญููู ูุฅุนุฏุงุฏ ุงููุดุฑูุน

```bash
# ุฅูุดุงุก ูุฌูุฏ ูููุดุฑูุน
mkdir ~/mikrotik-telegram-bot
cd ~/mikrotik-telegram-bot

# ุงุณุชุฎุฑุงุฌ ุงูููู ุงููุถุบูุท (ุฅุฐุง ูุงู ูุชููุฑุงู)
unzip MikroTikTelegramBot.zip
cd MikroTikTelegramBot

# ุฃู ูุณุฎ ุงููููุงุช ูุฏููุงู ุฅุฐุง ูุงูุช ูููุตูุฉ
```

### ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ

```bash
# ุฅูุดุงุก ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
python3 -m venv venv

# ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
# ุนูู Linux/macOS:
source venv/bin/activate

# ุนูู Windows:
venv\Scripts\activate

# ูุฌุจ ุฃู ุชุฑู (venv) ูู ุจุฏุงูุฉ ุณุทุฑ ุงูุฃูุงูุฑ
```

### ุงูุฎุทูุฉ 4: ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
# ุชุญุฏูุซ pip
pip install --upgrade pip

# ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ
pip install -r requirements.txt

# ุงูุชุญูู ูู ุงูุชุซุจูุช
pip list
```

ุฅุฐุง ูุงุฌูุช ูุดุงูู ูู ุงูุชุซุจูุชุ ุฌุฑุจ:
```bash
# ุชุซุจูุช ุงูููุชุจุงุช ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู
pip install python-telegram-bot==22.2
pip install RouterOS-api==0.21.0
pip install reportlab==4.4.2
pip install fpdf2==2.8.3
pip install cryptography==45.0.5
pip install pillow>=9.0.0
```

## ๐ค ุฅุนุฏุงุฏ ุจูุช ุชููุฌุฑุงู

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงูุจูุช

1. **ุงูุชุญ ุชููุฌุฑุงู** ูุงุจุญุซ ุนู `@BotFather`
2. **ุงุจุฏุฃ ูุญุงุฏุซุฉ** ูุน BotFather
3. **ุฃุฑุณู ุงูุฃูุฑ** `/newbot`
4. **ุงุฎุชุฑ ุงุณูุงู** ููุจูุช (ูุซู: "ูุฏูุฑ ุงููููุฑูุชู ุงูุฎุงุต ุจู")
5. **ุงุฎุชุฑ ุงุณู ูุณุชุฎุฏู** ููุจูุช (ูุฌุจ ุฃู ููุชูู ุจู `bot`)
6. **ุงุญูุธ ุงูุชููู** ุงูุฐู ุณุชุญุตู ุนููู

### ุงูุฎุทูุฉ 2: ุชุฎุตูุต ุงูุจูุช (ุงุฎุชูุงุฑู)

```bash
# ุฅุนุฏุงุฏ ูุตู ุงูุจูุช
/setdescription
# ุซู ุฃุฑุณู: "ุจูุช ูุฅุฏุงุฑุฉ ุฃุฌูุฒุฉ ุงููููุฑูุชู ุนู ุจูุนุฏ"

# ุฅุนุฏุงุฏ ุฃูุงูุฑ ุงูุจูุช
/setcommands
# ุซู ุฃุฑุณู:
start - ุจุฏุก ุงูุชูุงุนู ูุน ุงูุจูุช
login - ุชุณุฌูู ุงูุฏุฎูู ูููููุฑูุชู
help - ุนุฑุถ ุงููุณุงุนุฏุฉ

# ุฅุนุฏุงุฏ ุตูุฑุฉ ููุจูุช
/setuserpic
# ุซู ุฃุฑุณู ุตูุฑุฉ ููุงุณุจุฉ
```

## โ๏ธ ุชูููู ุงูุจูุช

### ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ููู ุงูุชูููู

```bash
# ุงูุณุฎ ููู ุงูุชูููู ุงููููุฐุฌู
cp config.py.example config.py

# ุฃู ุฃูุดุฆ ุงูููู ูุฏููุงู
nano config.py
```

### ุงูุฎุทูุฉ 2: ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช

ุฃุถู ุงููุญุชูู ุงูุชุงูู ุฅูู `config.py`:

```python
"""
ุฅุนุฏุงุฏุงุช ุจูุช ุชููุฌุฑุงู ูุฅุฏุงุฑุฉ ุงููููุฑูุชู
"""

import os
from cryptography.fernet import Fernet

# ุชููู ุงูุจูุช ูู BotFather
TELEGRAM_BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"  # ุถุน ุงูุชููู ููุง

# ููุชุงุญ ุงูุชุดููุฑ (ุณูุชู ุฅูุดุงุคู ุชููุงุฆูุงู ุฅุฐุง ูู ููู ููุฌูุฏุงู)
ENCRYPTION_KEY = os.getenv('ENCRYPTION_KEY', Fernet.generate_key().decode())

# ูุนุฑูุงุช ุงููุดุฑููู (ุงุฎุชูุงุฑู)
ADMIN_USER_IDS = [
    123456789,  # ุถุน ูุนุฑู ุชููุฌุฑุงู ุงูุฎุงุต ุจู ููุง
    # ูููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงููุนุฑูุงุช
]

# ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_PATH = "mikrotik_bot.db"

# ุฅุนุฏุงุฏุงุช ุงูุณุฌูุงุช
LOG_LEVEL = "INFO"
LOG_FILE = "bot.log"

# ุฅุนุฏุงุฏุงุช ุงููููุฑูุชู ุงูุงูุชุฑุงุถูุฉ
DEFAULT_MIKROTIK_PORT = 8728
DEFAULT_MIKROTIK_TIMEOUT = 10

# ุฅุนุฏุงุฏุงุช ุงููุฑูุช
MAX_CARDS_PER_GENERATION = 100
DEFAULT_CARD_VALIDITY_DAYS = 30

# ุฅุนุฏุงุฏุงุช ุงูุฃูุงู
MAX_LOGIN_ATTEMPTS = 3
SESSION_TIMEOUT_HOURS = 24
```

### ุงูุฎุทูุฉ 3: ุงูุญุตูู ุนูู ูุนุฑู ุชููุฌุฑุงู ุงูุฎุงุต ุจู

1. ุงุจุญุซ ุนู `@userinfobot` ูู ุชููุฌุฑุงู
2. ุฃุฑุณู `/start`
3. ุงุญูุธ ุงูุฑูู ุงูุฐู ูุธูุฑ ูู "Id"
4. ุฃุถูู ุฅูู `ADMIN_USER_IDS` ูู ููู ุงูุชูููู

## ๐ง ุฅุนุฏุงุฏ ุงููููุฑูุชู

### ุชูุนูู API

#### ุนุจุฑ Winbox
1. ุงูุชุญ Winbox ูุงุชุตู ุจุงูุฑุงูุชุฑ
2. ุงุฐูุจ ุฅูู `IP` โ `Services`
3. ุงุจุญุซ ุนู `api` ูู ุงููุงุฆูุฉ
4. ุงููุฑ ููุฑุงู ูุฒุฏูุฌุงู ุนููู
5. ุชุฃูุฏ ูู ุฃู `Enabled` ูุญุฏุฏ
6. ูููู ุชุบููุฑ ุงููููุฐ ุฅุฐุง ุฃุฑุฏุช (ุงูุชุฑุงุถู: 8728)

#### ุนุจุฑ Terminal
```bash
# ุงูุงุชุตุงู ุจุงูุฑุงูุชุฑ ุนุจุฑ SSH ุฃู Terminal
ssh admin@192.168.1.1

# ุชูุนูู API
/ip service enable api

# ุชุนููู ูููุฐ ูุฎุตุต (ุงุฎุชูุงุฑู)
/ip service set api port=8728

# ุงูุชุญูู ูู ุงูุญุงูุฉ
/ip service print where name=api
```

### ุฅูุดุงุก ูุณุชุฎุฏู ููู API (ุงุฎุชูุงุฑู)

```bash
# ุฅูุดุงุก ูุฌููุนุฉ ูุฎุตุตุฉ ููู API
/user group add name=api-users policy=api,read,write,policy,test,password,sensitive,romon

# ุฅูุดุงุก ูุณุชุฎุฏู ููู API
/user add name=apiuser password=strong_password group=api-users

# ุฃู ุงุณุชุฎุฏุงู ูุณุชุฎุฏู ููุฌูุฏ ูุน ุตูุงุญูุงุช ูุงููุฉ
/user add name=botuser password=bot_password group=full
```

### ุฅุนุฏุงุฏุงุช ุงูุฌุฏุงุฑ ุงููุงุฑู

ุฅุฐุง ูุงู ูุฏูู ุฌุฏุงุฑ ูุงุฑู ููุนู:

```bash
# ุงูุณูุงุญ ุจุงููุตูู ูู API ูู ุดุจูุฉ ูุญุฏุฏุฉ
/ip firewall filter add chain=input protocol=tcp dst-port=8728 src-address=192.168.1.0/24 action=accept

# ุฃู ุงูุณูุงุญ ูู ุนููุงู IP ูุญุฏุฏ
/ip firewall filter add chain=input protocol=tcp dst-port=8728 src-address=192.168.1.100 action=accept
```

## ๐ ุชุดุบูู ุงูุจูุช

### ุงูุชุดุบูู ุงูุนุงุฏู

```bash
# ุชุฃูุฏ ูู ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
source venv/bin/activate

# ุชุดุบูู ุงูุจูุช
python main.py
```

### ุงูุชุดุบูู ูู ุงูุฎูููุฉ (Linux/macOS)

```bash
# ุงุณุชุฎุฏุงู nohup
nohup python main.py > bot.log 2>&1 &

# ุฃู ุงุณุชุฎุฏุงู screen
screen -S mikrotik-bot
python main.py
# ุงุถุบุท Ctrl+A ุซู D ููุฎุฑูุฌ ูู screen

# ููุนูุฏุฉ ุฅูู screen
screen -r mikrotik-bot
```

### ุงูุชุดุบูู ูุฎุฏูุฉ (Linux)

ุฅูุดุงุก ููู ุฎุฏูุฉ systemd:

```bash
sudo nano /etc/systemd/system/mikrotik-bot.service
```

ุฃุถู ุงููุญุชูู ุงูุชุงูู:

```ini
[Unit]
Description=MikroTik Telegram Bot
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/mikrotik-telegram-bot/MikroTikTelegramBot
Environment=PATH=/home/ubuntu/mikrotik-telegram-bot/MikroTikTelegramBot/venv/bin
ExecStart=/home/ubuntu/mikrotik-telegram-bot/MikroTikTelegramBot/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

ุชูุนูู ูุชุดุบูู ุงูุฎุฏูุฉ:

```bash
# ุฅุนุงุฏุฉ ุชุญููู systemd
sudo systemctl daemon-reload

# ุชูุนูู ุงูุฎุฏูุฉ
sudo systemctl enable mikrotik-bot

# ุชุดุบูู ุงูุฎุฏูุฉ
sudo systemctl start mikrotik-bot

# ูุญุต ุงูุญุงูุฉ
sudo systemctl status mikrotik-bot

# ุนุฑุถ ุงูุณุฌูุงุช
sudo journalctl -u mikrotik-bot -f
```

## โ ุงุฎุชุจุงุฑ ุงูุชุซุจูุช

### ุงุฎุชุจุงุฑ ุงูุจูุช

1. **ุงุจุญุซ ุนู ุงูุจูุช** ูู ุชููุฌุฑุงู ุจุงุณุชุฎุฏุงู ุงุณู ุงููุณุชุฎุฏู
2. **ุฃุฑุณู** `/start`
3. **ูุฌุจ ุฃู ูุฑุฏ ุงูุจูุช** ุจุฑุณุงูุฉ ุชุฑุญูุจ

### ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจุงููููุฑูุชู

1. **ุฃุฑุณู** `/login`
2. **ุฃุฏุฎู ูุนูููุงุช ุงูุงุชุตุงู**:
   ```
   192.168.1.1:8728:admin:password:My Router
   ```
3. **ูุฌุจ ุฃู ูุชู ุงูุงุชุตุงู ุจูุฌุงุญ**

### ุงุฎุชุจุงุฑ ุงูููุฒุงุช

1. **ูุนูููุงุช ุงููุธุงู**: ูุฌุจ ุนุฑุถ ูุนูููุงุช ุงูุฑุงูุชุฑ
2. **ุงูููุชุณุจูุช**: ูุฌุจ ุนุฑุถ ุงููุณุชุฎุฏููู ุงููุดุทูู
3. **ุชูููุฏ ุงููุฑูุช**: ูุฌุจ ุฅูุดุงุก ูุฑูุช ุฌุฏูุฏุฉ
4. **ุฃุฏูุงุช ุงูุชุดุฎูุต**: ูุฌุจ ุนูู ping ุจูุฌุงุญ

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

#### ุงูุจูุช ูุง ูุณุชุฌูุจ
```bash
# ูุญุต ุงูุณุฌูุงุช
tail -f bot.log

# ูุญุต ุงูุนูููุงุช
ps aux | grep python

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช
pkill -f main.py
python main.py
```

#### ุฎุทุฃ ูู ุงูุชููู
```
telegram.error.InvalidToken: Invalid token
```
**ุงูุญู**: ุชุฃูุฏ ูู ุตุญุฉ ุงูุชููู ูู `config.py`

#### ูุดู ุงูุงุชุตุงู ุจุงููููุฑูุชู
```
ูุดู ูู ุงูุงุชุตุงู ุจู 192.168.1.1:8728
```
**ุงูุญููู**:
- ุชุญูู ูู ุนููุงู IP
- ุชุฃูุฏ ูู ุชูุนูู API
- ูุญุต ุงูุฌุฏุงุฑ ุงููุงุฑู
- ุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ

#### ูุดุงูู ูู ุงูููุชุจุงุช
```bash
# ุฅุนุงุฏุฉ ุชุซุจูุช ุงูููุชุจุงุช
pip uninstall -r requirements.txt -y
pip install -r requirements.txt

# ุฃู ุชุญุฏูุซ pip
pip install --upgrade pip setuptools wheel
```

### ูุญุต ุงูุงุชุตุงู ุจุงููููุฑูุชู

```bash
# ุงุฎุชุจุงุฑ ping
ping 192.168.1.1

# ุงุฎุชุจุงุฑ ุงููููุฐ
telnet 192.168.1.1 8728

# ุฃู ุงุณุชุฎุฏุงู nmap
nmap -p 8728 192.168.1.1
```

## ๐ ุงูุตูุงูุฉ ูุงูุชุญุฏูุซ

### ุงููุณุฎ ุงูุงุญุชูุงุทู

```bash
# ูุณุฎ ุงุญุชูุงุทู ููุงุนุฏุฉ ุงูุจูุงูุงุช
cp mikrotik_bot.db backup/mikrotik_bot_$(date +%Y%m%d_%H%M%S).db

# ูุณุฎ ุงุญุชูุงุทู ููุฅุนุฏุงุฏุงุช
cp config.py backup/config_$(date +%Y%m%d_%H%M%S).py
```

### ุชุญุฏูุซ ุงูููุชุจุงุช

```bash
# ุชุญุฏูุซ ุฌููุน ุงูููุชุจุงุช
pip install --upgrade -r requirements.txt

# ุฃู ุชุญุฏูุซ ููุชุจุฉ ูุญุฏุฏุฉ
pip install --upgrade python-telegram-bot
```

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก

```bash
# ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ
htop

# ูุฑุงูุจุฉ ูุณุงุญุฉ ุงููุฑุต
df -h

# ูุฑุงูุจุฉ ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุช
ls -lh mikrotik_bot.db

# ุนุฑุถ ุงูุณุฌูุงุช
tail -f bot.log
```

## ๐ ุงูุฃูุงู

### ุชุฃููู ุงูุฎุงุฏู

```bash
# ุชุญุฏูุซ ุงููุธุงู
sudo apt update && sudo apt upgrade -y

# ุชุซุจูุช ุฌุฏุงุฑ ูุงุฑู
sudo ufw enable
sudo ufw allow ssh
sudo ufw allow from 192.168.1.0/24 to any port 8728

# ุชุบููุฑ ูููุฉ ูุฑูุฑ ุงููุณุชุฎุฏู
passwd
```

### ุชุฃููู ุงูุจูุช

1. **ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ** ูููููุฑูุชู
2. **ูู ุจุชุดููุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช** ุฅุฐุง ุฃููู
3. **ุฑุงูุจ ุงูุณุฌูุงุช** ุจุงูุชุธุงู
4. **ุญุฏุฏ ุงููุณุชุฎุฏููู ุงููุตุฑุญ ููู** ูู `ADMIN_USER_IDS`

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. **ุฑุงุฌุน ุงูุณุฌูุงุช**: `tail -f bot.log`
2. **ุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช**: `config.py`
3. **ุงุฎุชุจุฑ ุงูุงุชุตุงู**: ping ู telnet
4. **ุฑุงุฌุน ูุซุงุฆู ุงููููุฑูุชู**: [help.mikrotik.com](https://help.mikrotik.com)

---

**ุชู ุฅุนุฏุงุฏ ุงูุจูุช ุจูุฌุงุญ! ๐**

